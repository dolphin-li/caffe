name: "NL Test"
layers {
  top: "images"
  top: "imagelabels"
  name: "images"
  type: IMAGE_DATA
  image_data_param {
    source: "D:/data/BSDS500.imagelist.txt"
    scale: 0.0039215684
    batch_size: 10
    crop_size: 256
    shuffle: true
  }
}
layers {
  bottom: "images"
  top: "luma"
  name: "luma"
  type: BGR2LUMA
  bgr2luma_param {
    scale: 0.0039215684
  }
}

layers {
  bottom: "luma"
  top: "patches"
  name: "patch"
  type: PATCH_SAMPLE
  patch_sample_param{
    sample_per_img: 64
    patch_size: 32
  }
}

layers {
  bottom: "patches"
  top: "noise_patches"
  top: "noise_levels"
  name: "noise_add"
  type: ADD_NOISE
  add_noise_param{
    scale: 0.0039215684
    noise_level_min: 0
    noise_level_max: 40
    noise_type: 0
    noise_level_first_sample_point: 0
    noise_level_first_sample_rate: 0.0
  }
}

layers {
  bottom: "noise_patches"
  top: "f1"
  name: "f1"
  type: INNER_PRODUCT
  inner_product_param {
    num_output: 1024
  }
}
layers {
  bottom: "f1"
  top: "f1"
  name: "relu1"
  type: RELU
}
layers {
  bottom: "f1"
  top: "f2"
  name: "f2"
  type: INNER_PRODUCT
  inner_product_param {
    num_output: 256
  }
}
layers {
  bottom: "f2"
  top: "f2"
  name: "relu2"
  type: RELU
}
layers {
  bottom: "f2"
  top: "f3"
  name: "f3"
  type: INNER_PRODUCT
  inner_product_param {
    num_output: 1
  }
}

layers {
  bottom: "f3"
  bottom: "noise_levels"
  name: "loss"
  type: EUCLIDEAN_LOSS
}
